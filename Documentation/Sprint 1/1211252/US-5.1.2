# US 5.1.2 - Password Reset for Backoffice Users

## 1. Context

Backoffice users (Admins, Doctors, Nurses, Technicians) require a secure way to reset their passwords if forgotten, ensuring quick and secure access recovery to the system. This functionality supports system accessibility while maintaining security standards, protecting user accounts, and aligning with role-based access control.

## 2. Requirements

Domain - As a Backoffice User, I want the ability to reset my password in case of a forgotten password to regain access securely without compromising system security.

Acceptance Criteria:

- Request Process: Users initiate password reset by providing their registered email address.
- Email Verification: The system sends a password reset link to the user’s email.
- Expiration Policy: The reset link expires after a predefined period (e.g., 24 hours) to prevent unauthorized use.
- Password Complexity: Users must enter a new password that complies with the system's password complexity requirements.

## 3. Analysis

3.1 Study:
The password reset functionality requires secure handling of user credentials, ensuring the reset process is streamlined yet robust against unauthorized access. This system functionality supports role-based security and aligns with best practices for password management by including link expiration and complexity enforcement.

3.2 Analysis:
The design focuses on ease of use and security. By verifying user identity through email and setting link expiration, the system limits potential misuse of the reset feature. Password complexity enforcement helps to maintain a high-security standard for system access.

## 4. Design

Here is the domain model for Password Reset for Backoffice Users:

PasswordResetRequest Entity: Stores reset request details, including expiration time and status.
BackofficeUser Entity: Initiates the password reset request via the registered email.
EmailService: Sends a time-limited reset link to the user’s email address.
PasswordPolicy: Validates the new password for complexity before allowing it to be set.
Link Expiration: Manages the time validity of the reset link, disabling expired links.
Implementation
The team designed this functionality in accordance with DDD principles, emphasizing security and user experience. Key components, such as the PasswordResetRequest entity and expiration management, ensure secure and controlled access recovery. Complexity rules and email verification support compliance with security policies and enhance account protection.

## 5. Implementation/Major Commits

This feature was implemented into the project with UML diagrams created in PlantUML and saved in SVG format, showcasing the reset workflow. Below are the detailed requirements:

EmailService: Handles reset email delivery with embedded secure links.
PasswordPolicy: Enforces the complexity rules during new password creation.
Link Expiration Logic: Ensures links cannot be reused after the 24-hour expiration period, adding another layer of security.