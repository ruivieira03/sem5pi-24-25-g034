# US 5.1.4 - Patient Profile Update

## 1. Context

The healthcare application allows patients to update their user profile to keep their personal details and preferences accurate. This functionality is crucial for maintaining current contact information and preferences, ensuring effective communication and service delivery. Additional security is applied when changing sensitive information, along with logging changes for audit purposes.

## 2. Requirements

Domain - As a Patient, I want to update my user profile so I can maintain accurate personal details and manage preferences within the healthcare application.

Acceptance Criteria:

- Profile Update Access: Patients can log in and update their profile details, including personal and contact information, and preferences.
- Verification for Sensitive Changes: Updates to sensitive data, such as email addresses, trigger an additional verification step (e.g., confirmation email).
- Secure Data Storage: All profile updates are securely stored in the system.
- Audit Logging: The system logs all changes to the patient’s profile for auditing and compliance.

## 3. Analysis

3.1 Study:
Patient profile updates require secure handling of personal data, especially for sensitive information changes. This process helps ensure that patients’ information is always up to date and accurately reflects their preferences, while audit logging supports GDPR compliance and data integrity. Verification for sensitive changes prevents unauthorized modifications.

3.2 Analysis:
The design prioritizes security and data integrity by enforcing verification for sensitive updates and ensuring secure data storage. By logging all changes, the system provides an audit trail, supporting transparency and accountability within the healthcare system.

## 4. Design

Here is the domain model for Patient Profile Update:

Patient Entity: Contains profile details, including personal information and preferences.
ProfileUpdateService: Manages update requests, enforcing validation and secure data handling.
EmailService: Sends confirmation emails for changes to sensitive information, such as email addresses.
AuditLog Entity: Records all changes made to patient profiles, including timestamps, changes, and user ID for audit purposes.
Implementation
The team implemented this feature according to DDD principles, with a focus on security, compliance, and usability. Key components—such as sensitive data verification, audit logging, and secure data storage—were designed to support data protection regulations and maintain accurate patient information.

## 5. Implementation/Major Commits

This feature is integrated into the system with UML diagrams, created in PlantUML and saved as SVG files, depicting the profile update workflow. Below are individual requirements:

ProfileUpdateService: Handles profile modification requests and validation.
EmailService: Sends confirmation emails for sensitive updates to verify patient identity.
AuditLog: Stores a record of each profile change, ensuring data changes are tracked for audit and compliance.